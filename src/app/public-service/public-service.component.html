<div id="section-container">
  <div id="content">
      <h2 id="main-header">Facturas electronicas</h2>
      <hr class="style-one">
      <p class="content-header">Ingrese el o los filtros a aplicar en la búsqueda</p>
      <div id="filters-container">
          <div class="filter-input">
              <p>
                  <mat-form-field appearance="standard" class="input-medium">
                      <mat-label>Número de cuenta</mat-label>
                      <input matInput placeholder="Ingresa el número de cuenta" class="form-control" id="accountNumber" name="accountNumber" minlength=7 [(ngModel)]="accountNumber" #accountNumberInput="ngModel"
                       (ngModelChange)="checkArgs()" (keyup.enter)="searchByArgs()">
                     
                      <mat-icon matSuffix>person</mat-icon>
                      <mat-hint>Longitud min: 7 caracteres</mat-hint>
                      <mat-error *ngIf="isActLengthCorrect=='false'">El número de cuenta debe tener al menos 7 caracteres</mat-error>
                  </mat-form-field>
              </p>
          </div>
          <img class="vertical-line" src="../assets/img/vertical-line.png">
          <div class="filter-input">
              <p>
                  <mat-form-field appearance="standard" class="input-medium">
                      <mat-label>Identificación</mat-label>
                      <input matInput placeholder="Ingresa el número de Identificación" class="form-control" name="identification" minlength=16 maxlength="16" [(ngModel)]="identification" #identificationInput="ngModel"
                      (ngModelChange)="checkArgs()" (keyup.enter)="searchByArgs()">
                      <mat-icon matSuffix>credit_card</mat-icon>
                      <mat-hint>Longitud min: 9 digitos</mat-hint>
                      <mat-error *ngIf="isCrdLengthCorrect=='false'">El número Identificacion debe tener 9 dígitos min</mat-error>
                  </mat-form-field>
              </p>
          </div>
          <img class="vertical-line" src="../assets/img/vertical-line.png">
          <div class="filter-input">
              <mat-form-field class="example-full-width" id="date-small">
                  <input matInput [matDatepicker]="pickerFrom" placeholder="Factura desde" class="form-control" [(ngModel)]="dateFrom" #dateFromInput="ngModel" (ngModelChange)="checkArgs()" (keyup.enter)="searchByArgs()">
                  <mat-datepicker-toggle matSuffix [for]="pickerFrom" ></mat-datepicker-toggle>
                  <mat-datepicker touchUi #pickerFrom></mat-datepicker>
                  <mat-hint>mm/dd/aaaa</mat-hint>
              </mat-form-field>
          </div>
          <img class="vertical-line" src="../assets/img/vertical-line.png">
          <div class="filter-input">
              <mat-form-field class="example-full-width" id="date-small">
                  <input matInput [matDatepicker]="pickerTo" placeholder="Hasta" class="form-control" [(ngModel)]="dateTo" #dateToInput="ngModel" (ngModelChange)="checkArgs()" (keyup.enter)="searchByArgs()">
                  <mat-datepicker-toggle matSuffix [for]="pickerTo"></mat-datepicker-toggle>
                  <mat-datepicker touchUi #pickerTo></mat-datepicker>
                  <mat-hint>mm/dd/aaaa</mat-hint>
              </mat-form-field>
          </div>

          <img class="vertical-line" src="../assets/img/vertical-line.png">
          <div class="filter-input">
              <mat-form-field id="amount-small">
                  <input matInput placeholder="Monto desde" type="number" class="example-right-align" class="amountFrom" [(ngModel)]="amountFrom" #amountFromInput="ngModel" (ngModelChange)="checkArgs()" (keyup.enter)="searchByArgs()"> 
              </mat-form-field>
          </div>
          <img class="vertical-line" src="../assets/img/vertical-line.png">
          <div class="filter-input">
              <mat-form-field id="amount-small">
                  <input matInput placeholder="Hasta" type="number" class="example-right-align" class="form-control" [(ngModel)]="amountTo" #amountToInput="ngModel" (ngModelChange)="checkArgs()" (keyup.enter)="searchByArgs()">
              </mat-form-field>
          </div>

         
          <img class="vertical-line" src="../assets/img/vertical-line.png">
          <div class="filter-input">
              <mat-form-field class="input-medium">
                  <mat-select placeholder="Estado" (ngModelChange)="checkArgs()" [formControl]="state" [(value)]="state" >
                      <mat-option *ngFor="let state of stateList"   [value]="state">{{state[1]}}</mat-option>
                  </mat-select>
                  <mat-hint></mat-hint>
              </mat-form-field>
          </div>


          <div align="center">
         
          <div class="filter-input">
              <mat-form-field class="input-medium">
                  <mat-select placeholder="Medio de pago" [formControl]="paymethod" (ngModelChange)="checkArgs()"  [(value)]="paymethod">
                      <mat-option *ngFor="let paymethod of payMethodList" [value]="paymethod">{{paymethod[1]}}</mat-option>
                  </mat-select>
                  <mat-hint></mat-hint>
              </mat-form-field>
          </div>
          <img class="vertical-line" src="../assets/img/vertical-line.png">
          <div class="filter-input">
              <mat-form-field class="input-medium">
                  <mat-select placeholder="Condición de venta" [formControl]="salecondition" (ngModelChange)="checkArgs()"  [(value)]="salecondition">
                      <mat-option *ngFor="let salecondition of saleConditionList" [value]="salecondition">{{salecondition[1]}}</mat-option>
                  </mat-select>
                  <mat-hint></mat-hint>
              </mat-form-field>
          </div>
          <img class="vertical-line" src="../assets/img/vertical-line.png">
          <div class="filter-input">
              <mat-form-field class="input-medium">
                  <mat-select placeholder="Cartera" [formControl]="cartera" (ngModelChange)="checkArgs()"  [(value)]="cartera">
                      <mat-option *ngFor="let cartera of carteraList" [value]="cartera">{{cartera}}</mat-option>
                  </mat-select>
                  <mat-hint></mat-hint>
              </mat-form-field>
          </div>
          <img class="vertical-line" src="../assets/img/vertical-line.png">
          <div class="filter-input">
              <mat-form-field class="input-medium">
                  <mat-select placeholder="Tipo de documento" [formControl]="doctype" (ngModelChange)="checkArgs()"  [(value)]="doctype">
                      <mat-option *ngFor="let doctype of docTypeList" [value]="doctype">{{doctype[1]}}</mat-option>
                  </mat-select>
                  <mat-hint></mat-hint>
              </mat-form-field>
          </div>
        </div>
          




      </div>
      <div id="search-button">
          <button mat-raised-button color="primary" class="credix-theme" (click)="getPublicServiceReceiptsByParams()" [disabled]="validArgs==false">Buscar</button>
      </div>

      <div class="example-container mat-elevation-z8" id="data-table">
            <div class="example-loading-shade"
       *ngIf="isLoadingResults">
    <mat-spinner [diameter]="60" *ngIf="isLoadingResults"></mat-spinner>
  </div>
          <mat-form-field>
              <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Buscar...">
              <mat-hint>Puedes buscar por cualquier elemento de la lista</mat-hint>
          </mat-form-field>
         
          <table mat-table [dataSource]="dataSource" matSort>
     






                           
              <!-- Position Column -->
              <ng-container matColumnDef="accountNumber">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Número de consecutivo </th>
                  <td mat-cell *matCellDef="let element"> {{element.accountNumber}} </td>
              </ng-container>

              <!-- Name Column -->
              <ng-container matColumnDef="cardNumber">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Clave </th>
                  <td mat-cell *matCellDef="let element"> {{element.cardNumber}} </td>
              </ng-container>

              <!-- Weight Column -->
              <ng-container matColumnDef="publicService">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Fecha de facturación </th>
                  <td mat-cell *matCellDef="let element"> {{element.publicService}} </td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="currency">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Identificacion receptor </th>
                  <td mat-cell *matCellDef="let element"> {{element.currency}} </td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="amount">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Nombre receptor </th>
                  <td mat-cell *matCellDef="let element"> {{element.amount}} </td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="date">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Moneda </th>
                  <td mat-cell *matCellDef="let element"> {{element.date}} </td>
              </ng-container>
              <!-- Symbol Column -->
              <ng-container matColumnDef="invoiceNumber">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Monto final </th>
                  <td mat-cell *matCellDef="let element"> {{element.invoiceNumber}} </td>
              </ng-container>



              <ng-container matColumnDef="transactionNumber">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Tipo de pago </th>
                  <td mat-cell *matCellDef="let element"> {{element.transactionNumber}} </td>
              </ng-container>

              <ng-container matColumnDef="voucher">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Estado <i class="material-icons"  matTooltip="Este estado se encuentra registrado segun el envio de la factura al sistema de factura electronica hacienda" [matTooltipPosition]="'right'">
                    info
                    </i></th>
                  <td mat-cell *matCellDef="let element"> {{element.voucher}} </td>
              </ng-container>

              <ng-container matColumnDef="channel">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Reenvio </th>
                  <td mat-cell *matCellDef="let element"> {{element.channel}} </td>
              </ng-container>

              <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Detalle </th>
                <td mat-cell *matCellDef="let row">
                    <button (click)="openReceiptDetailModal(row.publicServiceReceiptId)" [disabled]="row.transactionNumber.length==8" mat-raised-button color="primary" class="credix-theme">Detalle</button>
                </td>
              </ng-container>
            
              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let publicServiceReceiptRows; columns: displayedColumns;"></tr>
           
          </table>
      

          <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
      </div>


</div>