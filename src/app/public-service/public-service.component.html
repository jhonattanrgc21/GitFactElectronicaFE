<div id="section-container">
  <div id="content">
      <h2 id="main-header">Facturas electronicas</h2>
      <hr class="style-one">
      <p class="content-header">Ingrese el o los filtros a aplicar en la búsqueda</p>
      <div id="filters-container">
          <div class="filter-input">
              <p>
                  <mat-form-field appearance="standard" class="input-medium">
                      <mat-label>Número de cuenta</mat-label>
                      <input matInput placeholder="Ingresa el número de cuenta" class="form-control" id="accountNumber" name="accountNumber" minlength=7 [(ngModel)]="accountNumber" #accountNumberInput="ngModel"
                       (ngModelChange)="checkArgs()" (keyup.enter)="searchByArgs()">
                     
                      <mat-icon matSuffix>person</mat-icon>
                      <mat-hint>Longitud min: 7 caracteres</mat-hint>
                      <mat-error *ngIf="isActLengthCorrect=='false'">El número de cuenta debe tener al menos 7 caracteres</mat-error>
                  </mat-form-field>
              </p>
          </div>
          <img class="vertical-line" src="../assets/img/vertical-line.png">
          <div class="filter-input">
              <p>
                  <mat-form-field appearance="standard" class="input-medium">
                      <mat-label>Identificación</mat-label>
                      <input matInput placeholder="Ingresa el número de Identificación" class="form-control" name="identification" minlength=16 maxlength="16" [(ngModel)]="identification" #identificationInput="ngModel"
                      (ngModelChange)="checkArgs()" (keyup.enter)="searchByArgs()">
                      <mat-icon matSuffix>credit_card</mat-icon>
                      <mat-hint>Longitud min: 9 digitos</mat-hint>
                      <mat-error *ngIf="isCrdLengthCorrect=='false'">El número Identificacion debe tener 9 dígitos min</mat-error>
                  </mat-form-field>
              </p>
          </div>
          <img class="vertical-line" src="../assets/img/vertical-line.png">
          <div class="filter-input">
              <mat-form-field class="example-full-width" id="date-small">
                  <input matInput [matDatepicker]="pickerFrom" placeholder="Factura desde" class="form-control" [(ngModel)]="dateFrom" #dateFromInput="ngModel" (ngModelChange)="checkArgs()" (keyup.enter)="searchByArgs()">
                  <mat-datepicker-toggle matSuffix [for]="pickerFrom" ></mat-datepicker-toggle>
                  <mat-datepicker touchUi #pickerFrom></mat-datepicker>
                  <mat-hint>mm/dd/aaaa</mat-hint>
              </mat-form-field>
          </div>
          <img class="vertical-line" src="../assets/img/vertical-line.png">
          <div class="filter-input">
              <mat-form-field class="example-full-width" id="date-small">
                  <input matInput [matDatepicker]="pickerTo" placeholder="Hasta" class="form-control" [(ngModel)]="dateTo" #dateToInput="ngModel" (ngModelChange)="checkArgs()" (keyup.enter)="searchByArgs()">
                  <mat-datepicker-toggle matSuffix [for]="pickerTo"></mat-datepicker-toggle>
                  <mat-datepicker touchUi #pickerTo></mat-datepicker>
                  <mat-hint>mm/dd/aaaa</mat-hint>
              </mat-form-field>
          </div>

          <img class="vertical-line" src="../assets/img/vertical-line.png">
          <div class="filter-input">
              <mat-form-field id="amount-small">
                  <input matInput placeholder="Monto desde" type="number" class="example-right-align" class="amountFrom" [(ngModel)]="amountFrom" #amountFromInput="ngModel" (ngModelChange)="checkArgs()" (keyup.enter)="searchByArgs()"> 
              </mat-form-field>
          </div>
          <img class="vertical-line" src="../assets/img/vertical-line.png">
          <div class="filter-input">
              <mat-form-field id="amount-small">
                  <input matInput placeholder="Hasta" type="number" class="example-right-align" class="form-control" [(ngModel)]="amountTo" #amountToInput="ngModel" (ngModelChange)="checkArgs()" (keyup.enter)="searchByArgs()">
              </mat-form-field>
          </div>

         
          <img class="vertical-line" src="../assets/img/vertical-line.png">
          <div class="filter-input">
              <mat-form-field class="input-medium">
                  <mat-select placeholder="Estado" [formControl]="state" [(value)]="selectedState">
                      <mat-option *ngFor="let state of stateList" [value]="state" (click)="checkArgs()">{{state[1]}}</mat-option>
                  </mat-select>
                  <mat-hint></mat-hint>
              </mat-form-field>
          </div>


          <div align="center">
          <div class="filter-input">
              <mat-form-field class="input-medium">
                  <mat-select placeholder="Medio de pago" [formControl]="paymethod" [(value)]="selectedPaymethod">
                      <mat-option *ngFor="let paymethod of payMethodList" [value]="paymethod" (click)="checkArgs()">{{paymethod[1]}}</mat-option>
                  </mat-select>
                  <mat-hint></mat-hint>
              </mat-form-field>
          </div>
          <img class="vertical-line" src="../assets/img/vertical-line.png">
          <div class="filter-input">
              <mat-form-field class="input-medium">
                  <mat-select placeholder="Condición de venta" [formControl]="salecondition" [(value)]="selectedSalecondition">
                      <mat-option *ngFor="let salecondition of saleConditionList" [value]="salecondition" (click)="checkArgs()">{{salecondition[1]}}</mat-option>
                  </mat-select>
                  <mat-hint></mat-hint>
              </mat-form-field>
          </div>
          <img class="vertical-line" src="../assets/img/vertical-line.png">
          <div class="filter-input">
              <mat-form-field class="input-medium">
                  <mat-select placeholder="Cartera" [formControl]="cartera" [(value)]="selectedCartera">
                      <mat-option *ngFor="let cartera of carteraList" [value]="cartera" (click)="checkArgs()">{{cartera}}</mat-option>
                  </mat-select>
                  <mat-hint></mat-hint>
              </mat-form-field>
          </div>
          <img class="vertical-line" src="../assets/img/vertical-line.png">
          <div class="filter-input">
              <mat-form-field class="input-medium">
                  <mat-select placeholder="Tipo de documento" [formControl]="doctype" [(value)]="selectedDoctype">
                      <mat-option *ngFor="let doctype of docTypeList" [value]="doctype" (click)="checkArgs()">{{doctype[1]}}</mat-option>
                  </mat-select>
                  <mat-hint></mat-hint>
              </mat-form-field>
          </div>
        </div>
          




      </div>
      <div id="search-button">
          <button mat-raised-button color="primary" class="credix-theme" (click)="getElectronicBillsByParams()" [disabled]="validArgs==false">Buscar</button>
      </div>

      <div class="example-container mat-elevation-z8" id="data-table">
            <div class="example-loading-shade"
       *ngIf="isLoadingResults">
    <mat-spinner [diameter]="60" *ngIf="isLoadingResults"></mat-spinner>
  </div>
          <mat-form-field>
              <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Buscar...">
              <mat-hint>Puedes buscar por cualquier elemento de la lista</mat-hint>
          </mat-form-field>
         
          <table mat-table [dataSource]="dataSource" matSort>
     

                           
              <!-- Position Column -->
              <ng-container matColumnDef="consecutiveNumber">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Número de consecutivo </th>
                  <td mat-cell *matCellDef="let element"> {{element.consecutiveNumber}} </td>
              </ng-container>

              <!-- Name Column -->
              <ng-container matColumnDef="passwordGenerated">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Clave </th>
                  <td mat-cell *matCellDef="let element"> {{element.passwordGenerated}} </td>
              </ng-container>

              <!-- Weight Column -->
              <ng-container matColumnDef="billDate">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Fecha de facturación </th>
                  <td mat-cell *matCellDef="let element"> {{element.billDate}} </td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="identification">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Identificacion receptor </th>
                  <td mat-cell *matCellDef="let element"> {{element.identification}} </td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="name">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Nombre receptor </th>
                  <td mat-cell *matCellDef="let element"> {{element.name}} </td>
              </ng-container>

              <!-- Symbol Column -->
              <ng-container matColumnDef="moneda">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Moneda </th>
                  <td mat-cell *matCellDef="let element"> {{element.moneda}} </td>
              </ng-container>
              <!-- Symbol Column -->
              <ng-container matColumnDef="montoFinal">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Monto final </th>
                  <td mat-cell *matCellDef="let element"> {{element.montoFinal}} </td>
              </ng-container>



              <ng-container matColumnDef="tipoPago">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Tipo de pago </th>
                  <td mat-cell *matCellDef="let element"> {{element.tipoPago}} </td>
              </ng-container>

              <ng-container matColumnDef="estado">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Estado <i class="material-icons"  matTooltip="Este estado se encuentra registrado segun el envio de la factura al sistema de factura electronica hacienda" [matTooltipPosition]="'right'">
                    info
                    </i></th>
                  <td mat-cell *matCellDef="let element"> {{element.estado}} </td>
              </ng-container>


             <!-- Symbol Column -->
          <ng-container matColumnDef="reenvio">
             <th mat-header-cell *matHeaderCellDef mat-sort-header> Reenvio </th>
             <td mat-cell *matCellDef="let row">
                 <button (click)="sendBillPDF(row.consecutiveNumber)"  mat-raised-button color="primary" class="credix-theme">Reenvio</button>
             </td>

             
           </ng-container>
            
            <!-- Symbol Column -->
            <ng-container matColumnDef="pdf">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> PDF </th>
                <td mat-cell *matCellDef="let row">
                    <button   mat-raised-button color="primary" class="credix-theme">PDF</button>
                </td>

                
            </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let publicServiceReceiptRows; columns: displayedColumns;"></tr>
           
          </table>
      

          <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
      </div>


</div>